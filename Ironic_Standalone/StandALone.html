<!DOCTYPE html>
<html>
<head>
<link rel="icon" type="image/png" href="http://127.0.0.1:83/static/images/pinguin.png">

<style>
html, body {
  height: 100% !important;
  width: 100% !important; 
  margin: 0px;
  font-family: "Lato", sans-serif;
}

.main {
  margin-left: 230px;
  font-size: 20px;
  padding: 0px 10px;
  line-height: 0.4;
}


.sidenav {
  height: 100%;
  width: 230px;
  position: fixed;
  z-index: 1;
  top: 0;
  left: 0;
  background-color: #111;
  overflow-x: hidden;
  padding-top: 20px;
}
.sidenav a, .dropdown-btn {
  padding: 6px 8px 6px 16px;
  text-decoration: none;
  font-size: 20px;
  color: #818181;
  display: block;
  border: none;
  background: none;
  width: 100%;
  text-align: left;
  cursor: pointer;
  outline: none;
}
.sidenav a:hover, .dropdown-btn:hover {
  color: #f1f1f1;
}
.active {
  background-color: green;
  color: white;
}
.dropdown-container {
  display: none;
  background-color: #262626;
  padding-left: 8px;
}
.fa-caret-down {
  float: right;
  padding-right: 8px;
}
@media screen and (max-height: 450px) {
  .sidenav {padding-top: 15px;}
  .sidenav a {font-size: 18px;}
}


.index {
  padding-top: 0.5em;
  padding: 1em;
  padding-bottom: 1em;
  margin-bottom: 2em;
  height: 10vw !important;
  -webkit-box-shadow: 20px 15px 15px 5px rgba(0,0,0,0.92);
  box-shadow: 20px 15px 15px 5px rgba(0,0,0,0.92);
}

.pindextitle {
  text-align: left;
  margin-left: 0;
  margin-right: 1em;
  margin-bottom: 0.5em;
  font-size: 2.5vw !important;
  line-height: 1em;
}

.pindextime {
  text-align: right;
  margin-left: 0;
  margin-right: 1em;
  margin-top: 0.5em !important;
  font-size: 1.5vw !important;
  padding-bottom: 0.5em;
}


.numerallines {
  width: 100% !important;
  margin: 0 0 0 0 !important;

  position: relative !important;
  overflow: auto !important;
  font-size: 1em !important;
}

.numerallines a,
.numerallines div,
.numerallines code,
.numerallines table,
.numerallines table td,
.numerallines table tr,
.numerallines table tbody,
.numerallines table thead,
.numerallines table caption,
.numerallines textarea {
  -moz-border-radius: 0 0 0 0 !important;
  -webkit-border-radius: 0 0 0 0 !important;
  background: none !important;
  border: 0 !important;
  bottom: auto !important;
  float: none !important;
  height: auto !important;
  left: auto !important;
  line-height: 1.1em !important;
  margin: 0 !important;
  outline: 0 !important;
  overflow: visible !important;
  padding: 0 !important;
  position: static !important;
  right: auto !important;
  text-align: left !important;
  top: auto !important;
  vertical-align: baseline !important;
  width: auto !important;
  box-sizing: content-box !important;
  font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important;
  font-weight: normal !important;
  font-style: normal !important;
  font-size: 1em !important;
  min-height: inherit !important;
  min-height: auto !important;
}

.numerallines .line {
  white-space: pre !important;
}
.numerallines table {
  width: 100% !important;
  margin-top: 0px !important;
  margin-bottom: 0px !important;
}
.numerallines table td.code {
  width: 100% !important;
}
.numerallines table td.code .container {
  position: relative !important;
}
.numerallines table td.code .container textarea {
  box-sizing: border-box !important;
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  width: 100% !important;
  height: 100% !important;
  border: none !important;
  background: white !important;
  padding-left: 1em !important;
  overflow: hidden !important;
  white-space: pre !important;
}
.numerallines table td.gutter .line {
  text-align: right !important;
  padding: 0 0.3em 0 1em !important;
  color: #bbbbbb !important;
  border-right: 5px solid green !important;
}
.numerallines table td.code .line {
  padding: 0 1em !important;
}


.link {
  margin-top: 10px !important;
  margin-bottom: 60px !important;
  line-height: 20px;
}


.textsubtitle {
  line-height: 25px;
  font-size: 25px;
  margin-left: 25px;
  font-weight: bold;
}

.text p {
  height: 100%;
  line-height: 1.3em !important;
  font-size: 1.3.em !important;
  margin-bottom: 2px !important;
  margin-top: 5px !important;
  font-weight: normal !important;
}

.text {
  margin-bottom: 2px !important;
  margin-top: 5px !important;
}



.whichserver p {
  font-size: 2vw !important;
  line-height: 1em;
  font-weight: bold;
  margin: 0;
  margin-left: 80px;
  position: absolute;
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.whichserver img {
  position: relative;
  margin-left: 10px;
  margin-right: 10px;
}

.whichserver {
  height: 4vw !important;
  margin-bottom: 1.5em;
}


.textsubtitle {
  line-height: 25px;
  font-size: 25px;
  margin-left: 25px;
  font-weight: bold;
}


.centerimage {
  display: block;
  margin-left: auto;
  margin-right: auto;
  margin-bottom: 60px !important;
  margin-top: 4px !important;
}






.sample_attach a, 
.sample_attach div {
  width: 100px;
  border: 1px solid #DFAD00;
  background: #FFFFEE;
  padding: 0px 5px;
  font-weight: 900;
  color: #00009C;
  text-align: center;
}

.sample_attach a{
  display: block;
  border-bottom: none;
  text-decoration: none;
}

.sample_attach form{
  position: absolute;
  visibility: hidden;
  border: 1px solid #DFAD00;
  background: #FFFFEE;
  color: #00009C;
  padding: 0px 5px 2px 5px;
  text-align: center;
}


</style>
</head>
<body>

<div class="sidenav">
  <a href="http://127.0.0.1:83/index.html">Welcome</a>

  
  <button class="dropdown-btn">OpenStack
    <i class="fa-caret-down"></i>
    <img src="http://127.0.0.1:83/static/images/drop-down-arrow.png" alt="image" style="width:15px">
  </button>
    <div class="dropdown-container">
  <a href="http://127.0.0.1:83/OpenStack/pfSense-cloudinit.html">pfSense-cloudinit</a>
  <a href="http://127.0.0.1:83/OpenStack/pfSense-instance.html">pfSense-instance</a>
  <a href="http://127.0.0.1:83/OpenStack/openstack-helm.html">openstack-helm</a>
  
    <button class="dropdown-btn">Base
      <i class="fa-caret-down"></i>
      <img src="http://127.0.0.1:83/static/images/drop-down-arrow.png" alt="image" style="width:15px">
    </button>
    <div class="dropdown-container">
    
      <a href="http://127.0.0.1:83/OpenStack/Base/Instalation_Base.html">Instalation Base</a>
    
      <a href="http://127.0.0.1:83/OpenStack/Base/Calico_Base.html">Calico Base</a>
    
      <a href="http://127.0.0.1:83/OpenStack/Base/LinuxBridge_Base.html">LinuxBridge Base</a>
    
      <a href="http://127.0.0.1:83/OpenStack/Base/OpenVSwitch_Base.html">OpenVSwitch Base</a>
    
    </div>
  </div>

  <button class="dropdown-btn">Ironic_Standalone
    <i class="fa-caret-down"></i>
    <img src="http://127.0.0.1:83/static/images/drop-down-arrow.png" alt="image" style="width:15px">
  </button>
    <div class="dropdown-container">
  <a href="http://127.0.0.1:83/Ironic_Standalone/StandALone.html">StandALone</a>
  </div>

  <button class="dropdown-btn">Kubernetes
    <i class="fa-caret-down"></i>
    <img src="http://127.0.0.1:83/static/images/drop-down-arrow.png" alt="image" style="width:15px">
  </button>
    <div class="dropdown-container">
  <a href="http://127.0.0.1:83/Kubernetes/How_to_install_K8S.html">How to install K8S</a>
  <a href="http://127.0.0.1:83/Kubernetes/CKA.html">CKA</a>
  </div>
<a href="http://127.0.0.1:83/index.html">About</a>

</div>


<script>
var dropdown = document.getElementsByClassName("dropdown-btn");
var i;
for (i = 0; i < dropdown.length; i++) {
  dropdown[i].addEventListener("click", function() {
  this.classList.toggle("active");
  var dropdownContent = this.nextElementSibling;
  if (dropdownContent.style.display === "block") {
  dropdownContent.style.display = "none";
  } else {
  dropdownContent.style.display = "block";
  }
  });
}
</script>

<div class="main">
  
  <h1 style="text-align:center;"> BareMetal as a Service (Ironic) - StandAlone </h1>

<div class="text"><p><h1>code#</h1>
</p> </div>

<div class="text"><p><p>setenforce 0</p>
</p> </div>

<div class="text"><p><p>sed s/SELINUX=.*/SELINUX=disabled/ /etc/selinux/config -i</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>systemctl stop firewalld</p>
</p> </div>

<div class="text"><p><p>systemctl disable firewalld</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">
#### interface de gerencia

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>cat &lt;&lt; EOF &gt; /etc/sysconfig/network-scripts/ifcfg-eth0 </p>
</p> </div>

<div class="text"><p><p>TYPE=Ethernet</p>
</p> </div>

<div class="text"><p><p>BOOTPROTO=static</p>
</p> </div>

<div class="text"><p><p>NAME=eth0</p>
</p> </div>

<div class="text"><p><p>DEVICE=eth0</p>
</p> </div>

<div class="text"><p><p>ONBOOT=yes</p>
</p> </div>

<div class="text"><p><p>IPADDR=172.25.49.58</p>
</p> </div>

<div class="text"><p><p>PREFIX=22</p>
</p> </div>

<div class="text"><p><p>GATEWAY=172.25.48.129</p>
</p> </div>

<div class="text"><p><p>DNS1=8.8.8.8</p>
</p> </div>

<div class="text"><p><p>EOF</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">
 interface do dhcp

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>cat &lt;&lt; EOF &gt; /etc/sysconfig/network-scripts/ifcfg-eth1</p>
</p> </div>

<div class="text"><p><p>TYPE=Ethernet</p>
</p> </div>

<div class="text"><p><p>BOOTPROTO=static</p>
</p> </div>

<div class="text"><p><p>NAME=eth1</p>
</p> </div>

<div class="text"><p><p>DEVICE=eth1</p>
</p> </div>

<div class="text"><p><p>ONBOOT=yes</p>
</p> </div>

<div class="text"><p><p>IPADDR=192.168.0.2</p>
</p> </div>

<div class="text"><p><p>PREFIX=24</p>
</p> </div>

<div class="text"><p><p>EOF</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">
 pacotes basicos e repositorios

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>yum install vim epel-release bash-completion centos-release-openstack-rocky -y</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">
 banco de dados para o ironic

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>yum install mariadb-server -y</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">


            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>systemctl enable mariadb.service</p>
</p> </div>

<div class="text"><p><p>systemctl start mariadb.service</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>mysql -uroot -e &quot;CREATE DATABASE ironicdb CHARACTER SET utf8&quot;</p>
</p> </div>

<div class="text"><p><p>mysql -uroot -e &quot;GRANT ALL PRIVILEGES ON ironicdb.* TO &#39;ironicuser&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;ironicpass&#39;&quot;</p>
</p> </div>

<div class="text"><p><p>mysql -uroot -e &quot;GRANT ALL PRIVILEGES ON ironicdb.* TO &#39;ironicuser&#39;@&#39;%&#39; IDENTIFIED BY&#39;ironicpass&#39;&quot;</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">
 serviço de messageria

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>yum install rabbitmq-server.noarch -y</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div>
          <div class="line number1 index0 alt0">3</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">



            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>systemctl enable rabbitmq-server.service</p>
</p> </div>

<div class="text"><p><p>systemctl start rabbitmq-server.service</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">
 serviço de dhcp

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>yum install dhcp -y</p>
</p> </div>

<div class="text"><p><p>cat &lt;&lt; EOF &gt; /etc/dhcp/dhcpd.conf</p>
</p> </div>

<div class="text"><p><p>authoritative;</p>
</p> </div>

<div class="text"><p><p>allow unknown-clients;</p>
</p> </div>

<div class="text"><p><p>allow booting;</p>
</p> </div>

<div class="text"><p><p>allow bootp;</p>
</p> </div>

<div class="text"><p><p>option ip-forwarding    false;</p>
</p> </div>

<div class="text"><p><p>option mask-supplier    false;</p>
</p> </div>

<div class="text"><p><p>subnet 192.168.0.0 netmask 255.255.255.0 {</p>
</p> </div>

<div class="text"><p><pre><code>  range 192.168.0.100 192.168.0.254;
</code></pre>
</p> </div>

<div class="text"><p><pre><code>  option routers                          192.168.0.1;
</code></pre>
</p> </div>

<div class="text"><p><pre><code>  option domain-name-servers              8.8.8.8;
</code></pre>
</p> </div>

<div class="text"><p><pre><code>  option subnet-mask                      255.255.255.0;
</code></pre>
</p> </div>

<div class="text"><p><pre><code>  next-server                     192.168.0.2;
</code></pre>
</p> </div>

<div class="text"><p><pre><code>  filename                        &quot;pxelinux.0&quot;;
</code></pre>
</p> </div>

<div class="text"><p><pre><code>  max-lease-time                  86400;
</code></pre>
</p> </div>

<div class="text"><p><pre><code>  default-lease-time              43200;
</code></pre>
</p> </div>

<div class="text"><p><pre><code>  min-lease-time                  43200;
</code></pre>
</p> </div>

<div class="text"><p><p>}</p>
</p> </div>

<div class="text"><p><p>EOF</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>systemctl enable dhcpd</p>
</p> </div>

<div class="text"><p><p>systemctl start dhcpd</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">
 serviço de tftp

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>yum install tftp-server syslinux-tftpboot xinetd tftp -y</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>mv /var/lib/tftpboot /</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>ln -s /tftpboot /var/lib/</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>mkdir -p /tftpboot/master_images</p>
</p> </div>

<div class="text"><p><p>mkdir -p /tftpboot/pxelinux.cfg</p>
</p> </div>

<div class="text"><p><p>mkdir -p /tftpboot/ironic</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>echo &#39;re ^(/tftpboot/) /tftpboot/\2&#39; &gt; /tftpboot/map-file</p>
</p> </div>

<div class="text"><p><p>echo &#39;re ^/tftpboot/ /tftpboot/&#39; &gt;&gt; /tftpboot/map-file</p>
</p> </div>

<div class="text"><p><p>echo &#39;re ^(^/) /tftpboot/\1&#39; &gt;&gt; /tftpboot/map-file</p>
</p> </div>

<div class="text"><p><p>echo &#39;re ^([^/]) /tftpboot/\1&#39; &gt;&gt; /tftpboot/map-file</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>systemctl enable xinetd.service tftp.service</p>
</p> </div>

<div class="text"><p><p>systemctl start xinetd.service tftp.service</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">
 serivço de http

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>yum install httpd -y</p>
</p> </div>

<div class="text"><p><p>mkdir /var/www/html/httpboot</p>
</p> </div>

<div class="text"><p><p>systemctl enable httpd.service</p>
</p> </div>

<div class="text"><p><p>systemctl start httpd.service</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div>
          <div class="line number1 index0 alt0">3</div>
          <div class="line number1 index0 alt0">4</div>
          <div class="line number1 index0 alt0">5</div>
          <div class="line number1 index0 alt0">6</div>
          <div class="line number1 index0 alt0">7</div>
          <div class="line number1 index0 alt0">8</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">
 imagens... 
# yum install diskimage-builder -y
# disk-image-create ironic-agent centos7 -o provide-img ## ainda testando

# disk-image-create ironic-agent fedora -o ironic-deploy
###disk-image-create --install-type source -o deploy ironic-agent ubuntu devuser


            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>yum install qemu-img psmisc wget python-networkx squashfs-tools policycoreutils-python libguestfs-bash-completion libvirt diskimage-builder -y</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>systemctl enable libvirtd</p>
</p> </div>

<div class="text"><p><p>systemctl start libvirtd</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>wget http://tarballs.openstack.org/ironic-python-agent/coreos/files/coreos<em>production</em>pxe.vmlinuz -O /tftpboot/ironic/coreos<em>production</em>pxe.vmlinuz</p>
</p> </div>

<div class="text"><p><p>wget http://tarballs.openstack.org/ironic-python-agent/coreos/files/coreos<em>production</em>pxe<em>image-oem.cpio.gz -O /tftpboot/ironic/coreos</em>production<em>pxe</em>image-oem.cpio.gz</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>disk-image-create centos7 baremetal dhcp-all-interfaces grub2 -o centos7</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>export LIBGUESTFS_BACKEND=direct</p>
</p> </div>

<div class="text"><p><p>virt-sysprep -a centos7.qcow2 --root-password password:12</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>mv centos7.initrd /var/www/html/httpboot</p>
</p> </div>

<div class="text"><p><p>mv centos7.qcow2 /var/www/html/httpboot</p>
</p> </div>

<div class="text"><p><p>mv centos7.vmlinuz /var/www/html/httpboot</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">
 pacotes do ironic e dos clientes

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>yum install openstack-ironic-conductor.noarch openstack-ironic-api.noarch python-ironicclient python-openstackclient -y</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>cat &lt;&lt; EOF &gt; /etc/ironic/ironic.conf</p>
</p> </div>

<div class="text"><p><p>[DEFAULT]</p>
</p> </div>

<div class="text"><p><p>auth_strategy = noauth</p>
</p> </div>

<div class="text"><p><p>enabled<em>hardware</em>types = ipmi</p>
</p> </div>

<div class="text"><p><p>enabled<em>bios</em>interfaces = fake,ilo,irmc,no-bios</p>
</p> </div>

<div class="text"><p><p>enabled<em>console</em>interfaces = ipmitool-socat,no-console</p>
</p> </div>

<div class="text"><p><p>default<em>console</em>interface = no-console</p>
</p> </div>

<div class="text"><p><p>enabled<em>deploy</em>interfaces = iscsi,direct</p>
</p> </div>

<div class="text"><p><p>default<em>deploy</em>interface = direct</p>
</p> </div>

<div class="text"><p><p>enabled<em>management</em>interfaces = ipmitool,noop</p>
</p> </div>

<div class="text"><p><p>enabled<em>network</em>interfaces = flat,noop</p>
</p> </div>

<div class="text"><p><p>default<em>network</em>interface = noop</p>
</p> </div>

<div class="text"><p><p>enabled<em>power</em>interfaces = ipmitool</p>
</p> </div>

<div class="text"><p><p>enabled<em>vendor</em>interfaces = ipmitool,no-vendor</p>
</p> </div>

<div class="text"><p><p>my_ip = 172.25.49.58</p>
</p> </div>

<div class="text"><p><p>debug = true</p>
</p> </div>

<div class="text"><p><p>log_dir = /var/log/ironic</p>
</p> </div>

<div class="text"><p><p>transport_url = rabbit://guest:guest@localhost:5672/</p>
</p> </div>

<div class="text"><p><p>[agent]</p>
</p> </div>

<div class="text"><p><p>[ansible]</p>
</p> </div>

<div class="text"><p><p>[api]</p>
</p> </div>

<div class="text"><p><p>host_ip = 172.25.49.58</p>
</p> </div>

<div class="text"><p><p>port = 6385</p>
</p> </div>

<div class="text"><p><p>[audit]</p>
</p> </div>

<div class="text"><p><p>[cimc]</p>
</p> </div>

<div class="text"><p><p>[cinder]</p>
</p> </div>

<div class="text"><p><p>[cisco_ucs]</p>
</p> </div>

<div class="text"><p><p>[conductor]</p>
</p> </div>

<div class="text"><p><p>auth_type = none</p>
</p> </div>

<div class="text"><p><p>api_url = http://172.25.49.58:6385</p>
</p> </div>

<div class="text"><p><p>sync<em>power</em>state_interval = 60</p>
</p> </div>

<div class="text"><p><p>send<em>sensor</em>data = true</p>
</p> </div>

<div class="text"><p><p>send<em>sensor</em>data_types = Temperature,Fan,Voltage</p>
</p> </div>

<div class="text"><p><p>[console]</p>
</p> </div>

<div class="text"><p><p>terminal<em>cert</em>dir = /tmp/ca</p>
</p> </div>

<div class="text"><p><p>[cors]</p>
</p> </div>

<div class="text"><p><p>[database]</p>
</p> </div>

<div class="text"><p><p>connection=mysql+pymysql://ironicuser:ironicpass@localhost/ironicdb?charset=utf8</p>
</p> </div>

<div class="text"><p><p>[deploy]</p>
</p> </div>

<div class="text"><p><p>http_url = 172.25.49.58:80</p>
</p> </div>

<div class="text"><p><p>http_root = /httpboot</p>
</p> </div>

<div class="text"><p><p>[dhcp]</p>
</p> </div>

<div class="text"><p><p>dhcp_provider = none</p>
</p> </div>

<div class="text"><p><p>[disk_partitioner]</p>
</p> </div>

<div class="text"><p><p>[disk_utils]</p>
</p> </div>

<div class="text"><p><p>[drac]</p>
</p> </div>

<div class="text"><p><p>[glance]</p>
</p> </div>

<div class="text"><p><p>[healthcheck]</p>
</p> </div>

<div class="text"><p><p>[ilo]</p>
</p> </div>

<div class="text"><p><p>[inspector]</p>
</p> </div>

<div class="text"><p><p>endpoint_override = http://172.25.49.58:6385</p>
</p> </div>

<div class="text"><p><p>[ipmi]</p>
</p> </div>

<div class="text"><p><p>[irmc]</p>
</p> </div>

<div class="text"><p><p>[ironic_lib]</p>
</p> </div>

<div class="text"><p><p>[iscsi]</p>
</p> </div>

<div class="text"><p><p>[keystone_authtoken]</p>
</p> </div>

<div class="text"><p><p>[matchmaker_redis]</p>
</p> </div>

<div class="text"><p><p>[metrics]</p>
</p> </div>

<div class="text"><p><p>[metrics_statsd]</p>
</p> </div>

<div class="text"><p><p>[neutron]</p>
</p> </div>

<div class="text"><p><p>[oneview]</p>
</p> </div>

<div class="text"><p><p>[oslo_concurrency]</p>
</p> </div>

<div class="text"><p><p>[oslo<em>messaging</em>amqp]</p>
</p> </div>

<div class="text"><p><p>[oslo<em>messaging</em>kafka]</p>
</p> </div>

<div class="text"><p><p>[oslo<em>messaging</em>notifications]</p>
</p> </div>

<div class="text"><p><p>driver = messaging</p>
</p> </div>

<div class="text"><p><p>[oslo<em>messaging</em>rabbit]</p>
</p> </div>

<div class="text"><p><p>[oslo<em>messaging</em>zmq]</p>
</p> </div>

<div class="text"><p><p>[oslo_policy]</p>
</p> </div>

<div class="text"><p><p>[profiler]</p>
</p> </div>

<div class="text"><p><p>[pxe]</p>
</p> </div>

<div class="text"><p><p>pxe<em>append</em>params=nofb nomodeset vga=normal console=tty0 console=ttyS0,115200n8</p>
</p> </div>

<div class="text"><p><p>tftp_server = 172.25.49.58</p>
</p> </div>

<div class="text"><p><p>tftp_root = /tftpboot</p>
</p> </div>

<div class="text"><p><p>tftp<em>master</em>path = /tftpboot/master_images</p>
</p> </div>

<div class="text"><p><p>pxe<em>bootfile</em>name = pxelinux.0</p>
</p> </div>

<div class="text"><p><p>pxe<em>config</em>subdir = pxelinux.cfg</p>
</p> </div>

<div class="text"><p><p>[service_catalog]</p>
</p> </div>

<div class="text"><p><p>[snmp]</p>
</p> </div>

<div class="text"><p><p>[ssl]</p>
</p> </div>

<div class="text"><p><p>[swift]</p>
</p> </div>

<div class="text"><p><p>[xclarity]</p>
</p> </div>

<div class="text"><p><p>EOF</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>chown -R ironic: /tftpboot</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>ironic-dbsync --config-file /etc/ironic/ironic.conf create_schema</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>systemctl enable openstack-ironic-api openstack-ironic-conductor</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>systemctl start openstack-ironic-api openstack-ironic-conductor</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>cat &lt;&lt; EOF &gt; ~/RC_IRONIC</p>
</p> </div>

<div class="text"><p><p>export OS<em>AUTH</em>TOKEN=fake-token</p>
</p> </div>

<div class="text"><p><p>export IRONIC_URL=http://172.25.49.58:6385/</p>
</p> </div>

<div class="text"><p><p>export OS_TOKEN=fake-token</p>
</p> </div>

<div class="text"><p><p>export OS_URL=http://172.25.49.58:6385/</p>
</p> </div>

<div class="text"><p><p>EOF</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>source ~/RC_IRONIC</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>ironic node-list</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>openstack baremetal node list</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div>
          <div class="line number1 index0 alt0">3</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">



            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>nodename=compute-teste</p>
</p> </div>

<div class="text"><p><p>nodeuuid=&quot;50624d2d-c4f4-4e37-a9b8-9d56ea585a77&quot;</p>
</p> </div>

<div class="text"><p><p>macaddr=&quot;52:54:00:aa:bb:cc&quot;</p>
</p> </div>

<div class="text"><p><p>portid=&quot;ad55e1da-65da-4119-851d-db53326d94d6&quot;</p>
</p> </div>

<div class="text"><p><p>ipmiaddr=&quot;172.25.48.129&quot;</p>
</p> </div>

<div class="text"><p><p>ipmiuser=&quot;root&quot;</p>
</p> </div>

<div class="text"><p><p>ipmipass=&quot;calvin&quot;</p>
</p> </div>

<div class="text"><p><p>ipmiport=&quot;7701&quot;</p>
</p> </div>

<div class="text"><p><p>imagemd5=$(md5sum /var/www/html/httpboot/centos7.qcow2 | awk &#39;{print $1}&#39;)</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div>
          <div class="line number1 index0 alt0">3</div>
          <div class="line number1 index0 alt0">4</div>
          <div class="line number1 index0 alt0">5</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">


 no service-node


            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>virt-install --hvm --connect qemu:///system --network network=ironic-pxe,model=virtio,mac=${macaddr}  --pxe --graphics spice --name ${nodename}  --ram=1024 --vcpus=4 --os-type=linux --disk path=/var/lib/libvirt/images/rhel6-machine.img,size=30 --noautoconsole</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">


            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>vbmc add ${nodename} --port ${ipmiport} --address ${ipmiaddr} --username ${ipmiuser} --password ${ipmipass}</p>
</p> </div>

<div class="text"><p><p>vbmc start ${nodename} </p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">


            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>openstack baremetal node create --driver ipmi --uuid ${nodeuuid} --name ${nodename} \</p>
</p> </div>

<div class="text"><p><pre><code>--driver-info ipmi_address=${ipmiaddr} \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--driver-info ipmi_username=${ipmiuser} \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--driver-info ipmi_password=${ipmipass} \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--driver-info ipmi_port=${ipmiport} \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--driver-info deploy_kernel=file:///tftpboot/ironic/coreos_production_pxe.vmlinuz \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--driver-info deploy_ramdisk=file:///tftpboot/ironic/coreos_production_pxe_image-oem.cpio.gz
</code></pre>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>openstack baremetal port create ${macaddr} --node ${nodeuuid}</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>openstack baremetal node set ${nodeuuid} \</p>
</p> </div>

<div class="text"><p><pre><code>--instance-info image_source=http://172.25.49.58:80/httpboot/centos7.qcow2 \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--instance-info image_checksum=${imagemd5} \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--instance-info capabilities=&#39;{&quot;boot_option&quot;: &quot;local&quot;}&#39; \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--instance-info kernel=http://172.25.49.58:80/httpboot/centos7.vmlinuz \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--instance-info ramdisk=http://172.25.49.58:80/httpboot/centos7.initrd \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--instance-info root_gb=10 \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--management-interface noop \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--bios-interface no-bios \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--console-interface no-console \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--inspect-interface no-inspect \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--raid-interface no-raid \
</code></pre>
</p> </div>

<div class="text"><p><pre><code>--rescue-interface no-rescue
</code></pre>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>openstack baremetal node validate ${nodeuuid}</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>openstack baremetal node manage ${nodeuuid}</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>openstack baremetal node provide ${nodeuuid}</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">

            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>openstack baremetal node deploy ${nodeuuid}</p>
</p> </div>
<div class="numerallines">
  <table cellspacing="0" cellpadding="0" border="1">
    <tbody>
      <tr>
        <td class="gutter">
          
          <div class="line number1 index0 alt0">1</div>
          <div class="line number1 index0 alt0">2</div>
          <div class="line number1 index0 alt0">3</div></td>
        <td class="code">
          <div class="container">
          <div class="line number1 index0 alt1">



            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="text"><p><p>ipmitool -I lanplus -H 172.25.48.129 -L ADMINISTRATOR -p 7701 -U root -P calvin power on</p>
</p> </div>

</div>

</body>
</html> 

</html>